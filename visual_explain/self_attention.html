<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Attention Î©îÏª§ÎãàÏ¶ò</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .subtitle {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2em;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        .section h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.5em;
        }
        
        .demo-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .sentence-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .word-tokens {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .token {
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .token:hover, .token.selected {
            background: #5a6fd8;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .attention-viz {
            margin: 30px 0;
        }
        
        .attention-matrix {
            display: grid;
            gap: 2px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .matrix-cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
        }
        
        .matrix-labels {
            display: flex;
            gap: 2px;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .label {
            width: 40px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            background: #667eea;
            color: white;
            border-radius: 4px;
        }
        
        .step-by-step {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .step {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-top: 4px solid #667eea;
        }
        
        .step h3 {
            color: #667eea;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .formula {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        
        .qkv-demo {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        .qkv-box {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        
        .query-box { background: #e74c3c; }
        .key-box { background: #f39c12; }
        .value-box { background: #27ae60; }
        
        .attention-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .flow-item {
            flex: 1;
            min-width: 150px;
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .arrow {
            font-size: 24px;
            color: #667eea;
            margin: 0 10px;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 0 10px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .attention-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .multi-head {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .head {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 3px solid;
        }
        
        .head:nth-child(1) { border-top-color: #e74c3c; }
        .head:nth-child(2) { border-top-color: #f39c12; }
        .head:nth-child(3) { border-top-color: #27ae60; }
        .head:nth-child(4) { border-top-color: #3498db; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Self-Attention Î©îÏª§ÎãàÏ¶ò</h1>
            <div class="subtitle">
                "Attention is All You Need" - Í∞Å Îã®Ïñ¥Í∞Ä Î¨∏Ïû• ÎÇ¥ Îã§Î•∏ Î™®Îì† Îã®Ïñ¥ÏôÄ ÏñºÎßàÎÇò Í¥ÄÎ†®ÏûàÎäîÏßÄ Í≥ÑÏÇ∞
            </div>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>üéØ ÎåÄÌôîÌòï Self-Attention Îç∞Î™®</h2>
                <div class="demo-container">
                    <input type="text" class="sentence-input" id="sentenceInput" 
                           placeholder="Î¨∏Ïû•ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Ïòà: The cat sat on the mat)" 
                           value="The cat sat on the mat">
                    
                    <div class="controls">
                        <button class="btn" onclick="updateDemo()">Î∂ÑÏÑùÌïòÍ∏∞</button>
                        <button class="btn" onclick="setExample1()">ÏòàÏãú 1</button>
                        <button class="btn" onclick="setExample2()">ÏòàÏãú 2</button>
                    </div>
                    
                    <div class="word-tokens" id="wordTokens"></div>
                    
                    <div class="attention-score" id="attentionScore">
                        Îã®Ïñ¥Î•º ÌÅ¥Î¶≠ÌïòÏó¨ Îã§Î•∏ Îã®Ïñ¥Îì§Í≥ºÏùò Í¥ÄÍ≥ÑÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî!
                    </div>
                    
                    <div class="attention-viz">
                        <h3 style="text-align: center; color: #667eea;">Attention Í∞ÄÏ§ëÏπò ÌñâÎ†¨</h3>
                        <div class="matrix-labels" id="matrixLabels"></div>
                        <div class="attention-matrix" id="attentionMatrix"></div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üìê Self-Attention Îã®Í≥ÑÎ≥Ñ Í≥ºÏ†ï</h2>
                
                <div class="step-by-step">
                    <div class="step">
                        <h3><span class="step-number">1</span>Query, Key, Value ÏÉùÏÑ±</h3>
                        <div class="qkv-demo">
                            <div class="qkv-box query-box">
                                <h4>Query (Q)</h4>
                                <p>"Î¨¥ÏóáÏùÑ Ï∞æÍ≥† ÏûàÎäîÍ∞Ä?"</p>
                                <p>Q = X √ó W_Q</p>
                            </div>
                            <div class="qkv-box key-box">
                                <h4>Key (K)</h4>
                                <p>"Ïñ¥Îñ§ Ï†ïÎ≥¥Î•º Í∞ÄÏßÄÍ≥† ÏûàÎäîÍ∞Ä?"</p>
                                <p>K = X √ó W_K</p>
                            </div>
                            <div class="qkv-box value-box">
                                <h4>Value (V)</h4>
                                <p>"Ïã§Ï†ú Ï†ÑÎã¨Ìï† Ï†ïÎ≥¥Îäî?"</p>
                                <p>V = X √ó W_V</p>
                            </div>
                        </div>
                        <p>Í∞Å ÏûÖÎ†• ÌÜ†ÌÅ∞Ïóê ÎåÄÌï¥ ÏÑúÎ°ú Îã§Î•∏ Í∞ÄÏ§ëÏπò ÌñâÎ†¨ÏùÑ Í≥±ÌïòÏó¨ Q, K, V Î≤°ÌÑ∞Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§.</p>
                    </div>
                    
                    <div class="step">
                        <h3><span class="step-number">2</span>Attention Score Í≥ÑÏÇ∞</h3>
                        <div class="formula">
                            Score(Q_i, K_j) = Q_i ¬∑ K_j<br>
                            (QueryÏôÄ KeyÏùò ÎÇ¥Ï†Å)
                        </div>
                        <p>Í∞Å QueryÏôÄ Î™®Îì† Key ÏÇ¨Ïù¥Ïùò Ïú†ÏÇ¨ÎèÑÎ•º ÎÇ¥Ï†ÅÏúºÎ°ú Í≥ÑÏÇ∞Ìï©ÎãàÎã§. ÎÜíÏùÄ Ï†êÏàò = ÎÜíÏùÄ Í¥ÄÎ†®ÏÑ±</p>
                    </div>
                    
                    <div class="step">
                        <h3><span class="step-number">3</span>Ïä§ÏºÄÏùºÎßÅ Î∞è Softmax</h3>
                        <div class="formula">
                            Attention(Q,K) = softmax(QK^T / ‚àöd_k)
                        </div>
                        <p>‚àöd_kÎ°ú ÎÇòÎàÑÏñ¥ Ïä§ÏºÄÏùºÎßÅÌïú ÌõÑ, softmaxÎ•º Ï†ÅÏö©ÌïòÏó¨ ÌôïÎ•† Î∂ÑÌè¨Î°ú Î≥ÄÌôòÌï©ÎãàÎã§.</p>
                    </div>
                    
                    <div class="step">
                        <h3><span class="step-number">4</span>Í∞ÄÏ§ë Ìï©Í≥Ñ Í≥ÑÏÇ∞</h3>
                        <div class="formula">
                            Output = Attention(Q,K) √ó V
                        </div>
                        <p>Í≥ÑÏÇ∞Îêú attention Í∞ÄÏ§ëÏπòÏôÄ ValueÎ•º Í≥±ÌïòÏó¨ ÏµúÏ¢Ö Ï∂úÎ†•ÏùÑ ÏÉùÏÑ±Ìï©ÎãàÎã§.</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üîÑ Self-AttentionÏùò ÌïµÏã¨ ÏïÑÏù¥ÎîîÏñ¥</h2>
                
                <div class="highlight">
                    <strong>ÌïµÏã¨ Í∞úÎÖê:</strong> Î¨∏Ïû•Ïùò Í∞Å Îã®Ïñ¥Í∞Ä Í∞ôÏùÄ Î¨∏Ïû• ÎÇ¥Ïùò Î™®Îì† Îã®Ïñ¥(ÏûêÍ∏∞ ÏûêÏã† Ìè¨Ìï®)ÏôÄ ÏñºÎßàÎÇò Í¥ÄÎ†®Ïù¥ ÏûàÎäîÏßÄÎ•º ÎèôÏãúÏóê Í≥ÑÏÇ∞Ìï©ÎãàÎã§.
                </div>
                
                <div class="attention-flow">
                    <div class="flow-item">
                        <h4>ÏûÖÎ†• Î¨∏Ïû•</h4>
                        <p>"The cat sat"</p>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-item">
                        <h4>Q, K, V Î≥ÄÌôò</h4>
                        <p>Í∞Å Îã®Ïñ¥Î•º 3Í∞ÄÏßÄ Í¥ÄÏ†êÏúºÎ°ú ÌëúÌòÑ</p>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-item">
                        <h4>Í¥ÄÍ≥ÑÎèÑ Í≥ÑÏÇ∞</h4>
                        <p>Î™®Îì† Îã®Ïñ¥ ÏåçÏùò Í¥ÄÎ†®ÏÑ± Ï∏°Ï†ï</p>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-item">
                        <h4>Îß•ÎùΩ ÌëúÌòÑ</h4>
                        <p>Í¥ÄÎ†®ÏÑ±ÏùÑ Î∞òÏòÅÌïú ÏÉàÎ°úÏö¥ ÌëúÌòÑ</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üé≠ Multi-Head Attention</h2>
                <p>Ïó¨Îü¨ Í∞úÏùò attention headÎ•º Î≥ëÎ†¨Î°ú Ïã§ÌñâÌïòÏó¨ Îã§ÏñëÌïú Í¥ÄÏ†êÏóêÏÑú Í¥ÄÍ≥ÑÎ•º Ìè¨Ï∞©Ìï©ÎãàÎã§.</p>
                
                <div class="multi-head">
                    <div class="head">
                        <h4>Head 1</h4>
                        <p>Íµ¨Î¨∏Ï†Å Í¥ÄÍ≥Ñ</p>
                        <small>Ï£ºÏñ¥-ÎèôÏÇ¨ Í¥ÄÍ≥Ñ</small>
                    </div>
                    <div class="head">
                        <h4>Head 2</h4>
                        <p>ÏùòÎØ∏Ï†Å Í¥ÄÍ≥Ñ</p>
                        <small>Îã®Ïñ¥ Í∞Ñ ÏùòÎØ∏ Ïó∞Í¥Ä</small>
                    </div>
                    <div class="head">
                        <h4>Head 3</h4>
                        <p>ÏúÑÏπòÏ†Å Í¥ÄÍ≥Ñ</p>
                        <small>Í±∞Î¶¨ Í∏∞Î∞ò Í¥ÄÍ≥Ñ</small>
                    </div>
                    <div class="head">
                        <h4>Head 4</h4>
                        <p>Î¨∏Îß•Ï†Å Í¥ÄÍ≥Ñ</p>
                        <small>Î¨∏Îß• ÏùòÏ°¥Ï†Å Í¥ÄÍ≥Ñ</small>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üí° Ïôú Self-AttentionÏù¥ ÌòÅÏã†Ï†ÅÏù∏Í∞Ä?</h2>
                
                <div class="step-by-step">
                    <div class="step">
                        <h3>üöÄ Î≥ëÎ†¨ Ï≤òÎ¶¨</h3>
                        <p>RNNÍ≥º Îã¨Î¶¨ Î™®Îì† ÏúÑÏπòÎ•º ÎèôÏãúÏóê Ï≤òÎ¶¨Ìï† Ïàò ÏûàÏñ¥ Ìõ®Ïî¨ Îπ†Î¶ÖÎãàÎã§.</p>
                    </div>
                    
                    <div class="step">
                        <h3>üîó Ïû•Í±∞Î¶¨ ÏùòÏ°¥ÏÑ±</h3>
                        <p>Î¨∏Ïû•Ïùò ÏïûÏ™ΩÍ≥º Îí§Ï™Ω Îã®Ïñ¥ ÏÇ¨Ïù¥Ïùò Í¥ÄÍ≥ÑÎ•º ÏßÅÏ†ëÏ†ÅÏúºÎ°ú Î™®Îç∏ÎßÅÌï† Ïàò ÏûàÏäµÎãàÎã§.</p>
                    </div>
                    
                    <div class="step">
                        <h3>üéØ Ìï¥ÏÑù Í∞ÄÎä•ÏÑ±</h3>
                        <p>attention Í∞ÄÏ§ëÏπòÎ•º ÏãúÍ∞ÅÌôîÌïòÏó¨ Î™®Îç∏Ïù¥ Ïñ¥Îñ§ Îã®Ïñ¥Ïóê ÏßëÏ§ëÌïòÎäîÏßÄ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.</p>
                    </div>
                    
                    <div class="step">
                        <h3>üîÑ Ïú†Ïó∞ÏÑ±</h3>
                        <p>ÏûÖÎ†• Í∏∏Ïù¥Ïóê Í¥ÄÍ≥ÑÏóÜÏù¥ ÏùºÏ†ïÌïú Í≥ÑÏÇ∞ Î≥µÏû°ÎèÑÎ•º Ïú†ÏßÄÌï©ÎãàÎã§.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSentence = "";
        let currentWords = [];
        let selectedWordIndex = -1;
        
        function updateDemo() {
            const sentence = document.getElementById('sentenceInput').value.trim();
            if (!sentence) return;
            
            currentSentence = sentence;
            currentWords = sentence.toLowerCase().split(' ');
            selectedWordIndex = -1;
            
            renderTokens();
            renderAttentionMatrix();
            updateAttentionScore("Îã®Ïñ¥Î•º ÌÅ¥Î¶≠ÌïòÏó¨ Îã§Î•∏ Îã®Ïñ¥Îì§Í≥ºÏùò Í¥ÄÍ≥ÑÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî!");
        }
        
        function renderTokens() {
            const container = document.getElementById('wordTokens');
            container.innerHTML = '';
            
            currentWords.forEach((word, index) => {
                const token = document.createElement('div');
                token.className = 'token';
                token.textContent = word;
                token.onclick = () => selectWord(index);
                container.appendChild(token);
            });
        }
        
        function selectWord(index) {
            selectedWordIndex = index;
            
            // ÌÜ†ÌÅ∞ ÏÑ†ÌÉù ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            const tokens = document.querySelectorAll('.token');
            tokens.forEach((token, i) => {
                if (i === index) {
                    token.classList.add('selected');
                } else {
                    token.classList.remove('selected');
                }
            });
            
            highlightAttentionRow(index);
            updateAttentionScore(`"${currentWords[index]}"Í∞Ä Îã§Î•∏ Îã®Ïñ¥Îì§Í≥º Í∞ñÎäî Í¥ÄÍ≥ÑÎ•º Î≥¥Ïó¨Ï§çÎãàÎã§.`);
        }
        
        function renderAttentionMatrix() {
            const matrixContainer = document.getElementById('attentionMatrix');
            const labelsContainer = document.getElementById('matrixLabels');
            
            matrixContainer.innerHTML = '';
            labelsContainer.innerHTML = '';
            
            const size = currentWords.length;
            matrixContainer.style.gridTemplateColumns = `repeat(${size}, 40px)`;
            
            // ÎùºÎ≤® ÏÉùÏÑ±
            currentWords.forEach((word, i) => {
                const label = document.createElement('div');
                label.className = 'label';
                label.textContent = word.substring(0, 3);
                labelsContainer.appendChild(label);
            });
            
            // Îß§Ìä∏Î¶≠Ïä§ ÏÖÄ ÏÉùÏÑ±
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'matrix-cell';
                    cell.id = `cell-${i}-${j}`;
                    
                    // Í∞ÑÎã®Ìïú attention score ÏãúÎÆ¨Î†àÏù¥ÏÖò
                    const score = calculateMockAttention(i, j);
                    const intensity = Math.floor(score * 255);
                    cell.style.backgroundColor = `rgb(${255-intensity}, ${255-intensity}, 255)`;
                    cell.textContent = score.toFixed(2);
                    
                    cell.onclick = () => {
                        selectWord(i);
                    };
                    
                    matrixContainer.appendChild(cell);
                }
            }
        }
        
        function calculateMockAttention(i, j) {
            if (i === j) return 0.8; // ÏûêÍ∏∞ ÏûêÏã†Í≥ºÎäî ÎÜíÏùÄ Í¥ÄÎ†®ÏÑ±
            
            const distance = Math.abs(i - j);
            let score = Math.max(0.1, 0.7 - distance * 0.15); // Í±∞Î¶¨ Í∏∞Î∞ò
            
            // ÌäπÏ†ï Îã®Ïñ¥ ÏåçÏóê ÎåÄÌïú ÏùòÎØ∏Ï†Å Í¥ÄÎ†®ÏÑ± ÏãúÎÆ¨Î†àÏù¥ÏÖò
            const word1 = currentWords[i];
            const word2 = currentWords[j];
            
            // Í∞ÑÎã®Ìïú Ìú¥Î¶¨Ïä§Ìã±
            if ((word1 === 'cat' && word2 === 'sat') || 
                (word1 === 'sat' && word2 === 'cat')) score += 0.3;
            if ((word1 === 'the' && (word2 === 'cat' || word2 === 'mat')) ||
                ((word1 === 'cat' || word1 === 'mat') && word2 === 'the')) score += 0.2;
            
            return Math.min(1.0, score);
        }
        
        function highlightAttentionRow(rowIndex) {
            const size = currentWords.length;
            
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size; j++) {
                    const cell = document.getElementById(`cell-${i}-${j}`);
                    if (i === rowIndex) {
                        cell.style.border = '3px solid #e74c3c';
                        cell.style.transform = 'scale(1.1)';
                    } else {
                        cell.style.border = 'none';
                        cell.style.transform = 'scale(1)';
                    }
                }
            }
        }
        
        function updateAttentionScore(message) {
            document.getElementById('attentionScore').textContent = message;
        }
        
        function setExample1() {
            document.getElementById('sentenceInput').value = "The cat sat on the mat";
            updateDemo();
        }
        
        function setExample2() {
            document.getElementById('sentenceInput').value = "Machine learning is amazing";
            updateDemo();
        }
        
        // Ï¥àÍ∏∞ Î°úÎìú
        updateDemo();
    </script>
</body>
</html>